<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neocities Counter Generator</title>
    <script defer src="/neocities-counter/assets/alpine.min.js"></script>
    <link rel="stylesheet" href="/neocities-counter/assets/style-local.css">
</head>

<body>
    <div id="page" x-data="{
        style: 1,
        bg: '#000000',
        fg: '#FFFFFF',
        border: '#000000',
        borderSize: 0,
        site: '',
        link: true,
        linkColor: '#0000FF',
        alert: '',
        success: false,
        demo(){
            return `/demo.html?site=${this.site}&style=${this.style}&borderSize=${this.borderSize}&border=${this.border.replace('#','')}&bg=${this.bg.replace('#','')}&fg=${this.fg.replace('#','')}&link=${this.link}&linkColor=${this.linkColor.replace('#','')}`
        },
        code(){
            return `<iframe frameborder='0' width='132px' height='54px' src='https://luizfnunes.github.io/neocities-counter/counter.html?site=${this.site}&style=${this.style}&borderSize=${this.borderSize}&border=${this.border.replace('#','')}&bg=${this.bg.replace('#','')}&fg=${this.fg.replace('#','')}&link=${this.link}&linkColor=${this.linkColor.replace('#','')}'></iframe>`;
        },
        updateCode(){
            if(this.site == ''){
                this.success = false;
                this.alert = 'Please, enter your site name in neocities!';
            }else{
                navigator.clipboard.writeText(this.code())
                         .then(() => {
                            this.success = true;
                            this.alert = 'Copied to clipboard!';
                         })
                         .catch(err => {
                            this.success = false;
                            this.alert = 'Error copying to clipboard!';
                         });
            }
        }
    }" x-init="$watch('borderSize', val => {
        if(val < 0) borderSize = 0;
        if(val > 4) borderSize = 4;
    })">
        <h1>Neocities Counter Generator</h1>
        <iframe :src="demo" frameborder="0" width="132px" height="54px"></iframe>
        <div id="parameters">


            <div>
                <label for="">Font Name</label>
                <select id="font" x-model="style">
                    <option value="1">Believer</option>
                    <option value="2">Chainbox</option>
                    <option value="3">Gomarice</option>
                    <option value="4">Hieronimus</option>
                    <option value="5">Motorblock</option>
                    <option value="6">Minisystem</option>
                    <option value="7">Monofonto</option>
                    <option value="8">Ninepin</option>
                    <option value="9">November</option>
                    <option value="10">XType</option>
                </select>
            </div>
            <div>
                <label>Border Size</label>
                <input type="range" x-model="borderSize" min="0" max="4" step="1" />
            </div>
            <div>
                <label for="border">Border Color</label>
                <input type="color" x-model="border" id="border" />
            </div>
            <div>
                <label for="bg">Background Color</label>
                <input type="color" x-model="bg" id="bg" />
            </div>
            <div>
                <label for="fg">Foreground Color</label>
                <input type="color" x-model="fg" id="fg">
            </div>
            <div>
                <label for="site">Site Name</label>
                <input type="text" placeholder="YOURSITE" x-model="site" id="site">
            </div>
            <div>
                <label for="link">Show link to create visit counter</label>
                <input type="checkbox" x-model="link" id="link" />
            </div>
            <div x-show="link">
                <label for="linkColor">Link Color</label>
                <input type="color" id="fg" x-model="linkColor" itemid="linkColor">
            </div>
            <div id="button-area">
                <button id="generate" @click="updateCode()">Generate Code</button>
            </div>
            <div class="alert" :class="">
                <p x-text="alert"></p>
            </div>
            <div class="code" x-show="success">
                <textarea x-text="code" readonly></textarea>
            </div>
        </div>
    </div>
</body>

</html>